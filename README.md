# Daemon Application

The source code files are largely generated by ChatGPT.  This repository is a simple daemon application in C. The daemon runs in the background and wait for any inter-process message send by unix socket. The socket is located at /var/run/daemon.socket. The log messages are stored in the folder /var/log/daemon/.

## Requirements

    A C compiler, such as GCC
    The standard C library and development headers
    The POSIX functions for working with signals, processes, and file systems.

## Building the Application

To build the application, simply run the following command in the root of the repository:

```bash
./build.sh
```

or using "make-master" which requires full installation of automake 

```bash
./make-master build
```

Either one of these method will compile the source files and create an executable file named daemon under target/ folder.

## Running the Application as daemon

To run the application as a daemon in the background, execute the following command:

```bash
./target/daemon -d
```

## Stopping the daemon

To stop the daemon, execute the following command:

```bash
./target/daemon exit
```

## Send a message 
To run the application in the foreground and send a "Hi" message, simply execute the following command:

```bash
./target/daemon "hi"
```

## Log Files

The daemon will write log messages to files in the folder /var/log/daemon/. The log files have a prefix of daemon- and a date stamp in the format YYYY-MM-DD with an extension of .log. The daemon will also remove log files that are older than 7 days.

Sample of a log file:
```
2023-02-09 04:19:38 Daemon(2.9) #117 :] Daemon Started
2023-02-09 04:19:38 Daemon(2.9) #117 :] Waiting for incomming message.
2023-02-09 04:19:43 Daemon(2.9) #117 :] Received message: hi
2023-02-09 04:20:41 Daemon(2.9) #117 :] Received message: exit
2023-02-09 04:20:41 Daemon(2.9) #117 :] Terminated
```

## Docket exposed folder

The daemon program expected to keep operation data under folder: /data 